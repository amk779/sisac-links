<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Release Operacional - PMBA</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #1a3e72;
      --secondary-color: #d32f2f;
      --light-color: #f8f9fa;
      --dark-color: #343a40;
      --whatsapp-color: #25D366;
      --bg-color: #f4f4f4;
      --text-color: #333;
      --card-bg: white;
      --border-color: #ddd;
    }

    [data-theme="dark"] {
      --primary-color: #3a7bd5;
      --bg-color: #121212;
      --text-color: #f8f9fa;
      --card-bg: #1e1e1e;
      --border-color: #444;
      --light-color: #121212;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px;
      background: var(--bg-color);
      color: var(--text-color);
      line-height: 1.6;
      max-width: 1000px;
      margin: 0 auto;
      transition: background 0.3s, color 0.3s;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid var(--primary-color);
    }

    /* Removido estilo para .header img pois a imagem foi removida */

    h1, h2, h3, h4 {
      color: var(--primary-color);
      margin-top: 0;
    }

    .dev-credit {
      text-align: center;
      font-size: 14px;
      color: var(--text-color);
      margin: 0 0 15px 0;
      font-weight: bold;
      padding: 5px;
      background: rgba(0,0,0,0.1);
      border-radius: 4px;
    }

    .section {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
      border: 1px solid var(--border-color);
      transition: all 0.3s;
    }

    .btn {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
      margin-top: 10px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background-color: var(--primary-color);
      color: white;
    }

    .btn-primary:hover {
      background-color: #0d2b57;
    }

    .btn-success {
      background-color: #28a745;
      color: white;
    }

    .btn-success:hover {
      background-color: #218838;
    }

    .btn-whatsapp {
      background-color: var(--whatsapp-color);
      color: white;
    }

    .btn-whatsapp:hover {
      background-color: #1da851;
    }

    input, textarea, select {
      padding: 8px 12px;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      margin: 5px 0;
      width: 100%;
      background-color: var(--card-bg);
      color: var(--text-color);
      transition: all 0.3s;
    }

    textarea {
      min-height: 100px;
      resize: vertical;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-row {
      display: flex;
      gap: 15px;
      margin-bottom: 10px;
    }

    .form-row > * {
      flex: 1;
    }

    #output {
      white-space: pre-wrap;
      background: var(--light-color);
      padding: 20px;
      border-radius: 8px;
      margin-top: 20px;
      border: 1px solid var(--border-color);
      font-family: 'Courier New', Courier, monospace;
      min-height: 200px;
    }

    .hidden {
      display: none;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      flex-wrap: wrap;
    }

    .theme-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary-color);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      z-index: 1000;
      transition: all 0.3s;
    }

    .theme-toggle:hover {
      transform: scale(1.1);
    }

    @media (max-width: 768px) {
      .form-row {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>

<button class="theme-toggle" onclick="toggleTheme()">
  <i class="fas fa-moon"></i>
</button>

<div class="header">
  <div class="dev-credit">Desenvolvido por SD PM MIKAEL - 1¬™ CIPM</div>
  <h1>Release Operacional</h1>
  </div>

<div class="section">
  <h3><i class="fas fa-file-alt"></i> Preencha os dados do ocorrido:</h3>
  
  <div class="form-group">
    <label for="cpr">Comando de Policiamento Regional:</label>
    <select id="cpr">
      <option value="CPRC-A">CPRC-A (Atl√¢ntico)</option>
      <option value="CPRC-BTS">CPRC-BTS (Bahia de Todos os Santos)</option>
      <option value="CPRC-C">CPRC-C</option>
      <option value="CPRMS">CPRMS</option>
      <option value="CPR-N">CPR-N</option>
      <option value="CPR-Rec√¥ncavo">CPR-Rec√¥ncavo</option>
      <option value="CPR-Sul">CPR-Sul</option>
      <option value="CPR-Oeste">CPR-Oeste</option>
      <option value="CPR-Chapada">CPR-Chapada</option>
      <option value="CPR-Sudoeste">CPR-Sudoeste</option>
    </select>
  </div>
  
  <div class="form-group">
    <label for="tipo-ocorrencia">Tipo de Ocorr√™ncia:</label>
    <input type="text" id="tipo-ocorrencia" placeholder="Ex: APREENS√ÉO DE ARMA DE FOGO">
  </div>
  
  <div class="form-row">
    <div class="form-group">
      <label for="data">Data:</label>
      <input type="date" id="data">
    </div>
    <div class="form-group">
      <label for="hora">Hor√°rio:</label>
      <input type="time" id="hora">
    </div>
  </div>
  
  <div class="form-group">
    <label for="local">Local:</label>
    <input type="text" id="local" placeholder="Ex: AVENIDA CENTEN√ÅRIO - SALVADOR">
  </div>
  
  <div class="form-group">
    <label for="uopm">UOPM:</label>
    <input type="text" id="uopm" placeholder="Ex: 12¬∫ BPM">
  </div>
  
  <div class="form-group">
    <label for="recurso">Recurso:</label>
    <input type="text" id="recurso" placeholder="Ex: 9.0109">
  </div>
  
  <div class="form-group">
    <label for="relato">Relato da Ocorr√™ncia:</label>
    <textarea id="relato" placeholder="Descreva detalhadamente o ocorrido"></textarea>
  </div>
  
  <div class="action-buttons">
    <button class="btn btn-primary" onclick="gerarRelease()">
      <i class="fas fa-file-alt"></i> Gerar Release
    </button>
  </div>
</div>

<div class="section">
  <h3><i class="fas fa-clipboard-check"></i> Release Gerado:</h3>
  <div id="output"></div>
  
  <div class="action-buttons">
    <button class="btn btn-primary copy-btn" onclick="copiarTexto()">
      <i class="far fa-copy"></i> Copiar Texto
    </button>
    <a class="btn btn-whatsapp" id="whatsapp-btn" target="_blank" style="display: none;">
      <i class="fab fa-whatsapp"></i> Enviar por WhatsApp
    </a>
  </div>
</div>

<script>
  // Fun√ß√£o para alternar tema
  function toggleTheme() {
    const body = document.body;
    const currentTheme = body.getAttribute('data-theme');
    const icon = document.querySelector('.theme-toggle i');
    
    if (currentTheme === 'dark') {
      body.removeAttribute('data-theme');
      localStorage.setItem('theme', 'light');
      icon.classList.replace('fa-sun', 'fa-moon');
    } else {
      body.setAttribute('data-theme', 'dark');
      localStorage.setItem('theme', 'dark');
      icon.classList.replace('fa-moon', 'fa-sun');
    }
  }

  // Carregar tema salvo
  function loadTheme() {
    const savedTheme = localStorage.getItem('theme') || 'light';
    const icon = document.querySelector('.theme-toggle i');
    
    if (savedTheme === 'dark') {
      document.body.setAttribute('data-theme', 'dark');
      icon.classList.replace('fa-moon', 'fa-sun');
    }
  }

  // Formatar data no padr√£o DD/MM/AA
  function formatarData(dataStr) {
    if (!dataStr) return '';
    const partes = dataStr.split('-');
    return `${partes[2]}/${partes[1]}/${partes[0].slice(-2)}`;
  }

  // Formatar hora no padr√£o HHhMMMIN
  function formatarHora(horaStr) {
    if (!horaStr) return '';
    const [horas, minutos] = horaStr.split(':');
    return `${horas}h${minutos}MIN`;
  }

  // Gera o release final com formata√ß√£o para WhatsApp
  function gerarRelease() {
    const cprValue = document.getElementById('cpr').value; // Valor da op√ß√£o selecionada (j√° √© a sigla)
    const tipoOcorrencia = document.getElementById('tipo-ocorrencia').value;
    const data = document.getElementById('data').value;
    const hora = document.getElementById('hora').value;
    const local = document.getElementById('local').value;
    const uopm = document.getElementById('uopm').value;
    const recurso = document.getElementById('recurso').value;
    const relato = document.getElementById('relato').value;
    
    // A sigla do CPR j√° √© o pr√≥prio valor selecionado
    const siglaCPR = cprValue; 
    
    let texto = `*POLICIA MILITAR DA BAHIA*\n`;
    texto += `*COPPM*\n`;
    texto += `*${siglaCPR}*\n\n`; // Usa diretamente a sigla do value
    texto += `*RELEASE OPERACIONAL*\n\n`;
    texto += `‚ñ° *${tipoOcorrencia.toUpperCase()}*\n__  __  __  __  __  __  __ __ \n\n`; // Convertido para mai√∫sculas
    texto += `üî≥ *Data:* ${formatarData(data)}\n`;
    texto += `üî≥ *Hor√°rio:* ${formatarHora(hora)}\n`;
    texto += `üî≥ *Local:* ${local.toUpperCase()}\n`; // Convertido para mai√∫sculas
    texto += `üî≥ *UOPM:* ${uopm.toUpperCase()}\n`; // Convertido para mai√∫sculas
    texto += `‚óæ *Recursos:* ${recurso}\n\n`;
    texto += `__  __  __  __  __  __ __\n\n`;
    texto += `üî≥ *Resumo:* \n\n`;
    texto += `     ${relato}\n\n`;
    texto += `*_PMBA, uma For√ßa a servi√ßo do cidad√£o!_*`;
    
    document.getElementById("output").textContent = texto.trim();
    
    const whatsappBtn = document.getElementById('whatsapp-btn');
    whatsappBtn.href = `https://wa.me/?text=${encodeURIComponent(texto)}`;
    whatsappBtn.style.display = 'inline-flex';
  }
  
  // Copia o texto gerado
  function copiarTexto() {
    const output = document.getElementById("output");
    const range = document.createRange();
    range.selectNode(output);
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);
    document.execCommand("copy");
    window.getSelection().removeAllRanges();
    
    const btn = document.querySelector('.copy-btn');
    const originalText = btn.innerHTML;
    btn.innerHTML = '<i class="fas fa-check"></i> Copiado!';
    setTimeout(() => {
      btn.innerHTML = originalText;
    }, 2000);
  }
  
  // Inicializa√ß√£o
  document.addEventListener('DOMContentLoaded', () => {
    // Definir data atual como padr√£o
    const today = new Date();
    const dateStr = today.toISOString().split('T')[0];
    document.getElementById('data').value = dateStr;
    
    // Definir hora atual como padr√£o
    const now = new Date();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    document.getElementById('hora').value = `${hours}:${minutes}`;
    
    loadTheme();
  });
</script>
</body>
</html>
